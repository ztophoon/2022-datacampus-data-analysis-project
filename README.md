# 2022 데이터청년캠퍼스 데이터 분석 프로젝트
커리큘럼 명 : 빅데이터 분석 처리 과정 - 연세대학교<br/>
프로젝트 명 : "배추 농가의 가뭄 피해 최소화를 위한 국내 배추 가격 예측 시스템"<br/>
프로젝트 팀 : MIDAS<br/>
제출일자 : 2022.08.26

## Environments
    # Python        version	3.9.12
    # Conda		version	4.14.0
    # Pandas	version	1.4.2
    # Matplotlib	version	3.5.1
    # Plotly	version	5.10.0
    # Statsmodel	version	0.13.2
    # Tensorflow	version	2.9.1
    # Keras		version	2.9.0
    # Scikit-learn	version	1.1.1

## Libraries
 
    # Pandas	pip install pandas
    # Matplotlib	pip install matplotlib
    # Plotly	pip install plotly
    # Statsmodel	pip install statsmodels
    # Tensorflow	pip install tensorflow 
    # Keras		pip install keras
    # Scikit-learn	pip install scikit-learn

## Directories
    .
    ├── 전처리코드
    ├── 검정코드
    ├── 모델코드
    ├── data
    │   ├── 가뭄 		# 각 가뭄지수 종합 데이터
    │   │     └── 원본 	# 기상청 수문기상포털 제공 가뭄지수 원본 데이터
    │   ├── 거래량         	# 각 연도별 출하량 종합 데이터
    │   │     └── 원본 	# 농업관측통계시스템(OASIS) 제공 전국 5대도시(서울, 부산, 대구, 광주, 대전) 배추 출하량 원본 데이터
    │   ├── 도매가         	# 도매가격 데이터 종합 디렉토리
    │   │     ├── 원본	# 농산물유통정보포털(KAMIS) 제공 각 배추 품종별(봄, 여름, 가을, 겨울) 전국 5대시장(서울 부산, 대구, 광주, 대전) 도매가격 원본 데이터
    │   │     ├── 종합	# 전체 탐색기간 내의 각 품종별 도매가격 종합 데이터
    │   │     └── 보간	# 도매가격 종합 데이터 내의 결측치 보간 데이터
    │   ├── 수입량		# 연월별 배추 수입량 데이터
    │   ├── 유가		# 원본 데이터 기반 면세유가 전처리 데이터
    │   │     └── 원본	# 오피넷(opinet) 제공 주유소 지역별 일반유, 면세유 판매가격 데이터 원본
    │   ├── 재배면적_생산량  	# 전체 탐색기간 내 주요지역 배추 재배면적 및 생산량 전처리 데이터
    │   │     └── 원본	# 농산물유통정보포털(KAMIS) 제공 품목별 유통실태 보고서 내 배추별 재배면적 및 생산량 데이터 원본
    │   ├── 지역		# 가뭄지수 관측 지점 정보 및 한국 행정구역 분류, 위경도 좌표 데이터
    │   │
    │   ├── result	 	# 최종 학습 데이터 종합 디렉토리
    │   │     ├── 입력	# 각 전처리 데이터 별 최종 종합 형태 데이터
    |   |     └── 출력	# 5대도시별 최종 학습 데이터
    
  (디렉토리 중 원본 디렉토리는 본 프로젝트에서 활용한 Raw 데이터가 정리되어있는 디렉토리입니다.)<br/>
  (깃허브 자체 제한으로 인해 ./data/가뭄/원본/ 내의 일부 파일은 업로드 되어있지 않습니다.)
  

## Implementation
- 프로젝트 실행을 위해선 (1)전처리 코드 실행, (2)모델 코드 실행의 두 과정이 필요합니다.
- 추가로 각 데이터들이 정상성을 갖는지 통계적 검정을 위한 (3)검증 코드 실행 과정이 존재합니다. 
- 각 코드의 구체적인 기능 및 동작 과정은 코드 파일 내에 기술되어있습니다.
- ( # 외부 라이브러리 설치 코드가 전처리 코드 1번 파일('1_가뭄지수_전처리.ipynb')내에 구현되어있습니다.)

### 1. 전처리 코드 실행
- 전처리 코드 디렉토리("./전처리코드/") 내에 원본 데이터셋의 학습 데이터화를 위한 8개의 코드(.ipynb) 파일이 있습니다.
- 실행 코드들에 따라 원본 데이터들이 전처리되어 데이터 디렉토리("./data/")내 각 데이터에 해당하는 하위 디렉토리로 저장됩니다.
- 각 파일명 맨 앞 숫자 순서로 코드를 실행하면 전처리가 완료됩니다.
- (e.g. : '1_가뭄지수_전처리.ipynb' 실행 후 '2_시장별_거래량_우세_품목_종합.ipynb' 실행)
	 
	1_가뭄지수_전처리.ipynb<br/>
	  - 일별로 측정된 가뭄지수 중 학습에 활용할 3개의 지수 SPI1, SPI3, EDI를 각 관측지점 별로 통합하여 하나의 데이터셋으로 종합합니다.<br/>
	  - inputs : "./data/가뭄/원본/"<br/>
	  - output : "./data/가뭄/2013_2021_가뭄지수데이터.csv"<br/>

	2_시장별_거래량_우세_품목_종합.ipynb<br/>
	  - 전국 5대 도시의 품종별 배추 거래량을 통합하여 하나의 데이터셋으로 종합합니다.<br/>
	  - inputs : "./data/거래량/원본/"<br/>
	  - output : "./data/거래량/13_21년도_5대시장_거래량_종합.csv"<br/>

	3_면세유가_일반유가_전처리.ipynb<br/>
	  - 주유소 지역별 유가 데이터 중 결측값을 보간 처리하여 하나의 데이터셋으로 종합합니다.<br/>
	  - inputs : "./data/유가/원본/"<br/>
	  - output : "./data/유가/13_21_면세유가.csv"<br/>

 	4_재배면적_생산량_전처리.ipynb<br/>
	  - 전체 탐색기간 내 주요지역 배추 재배면적과 생산량을 하나의 데이터셋으로 종합합니다.<br/>
	  - inputs : "./data/재배면적_생산량/원본/"<br/>
	  - output :"./data/재배면적_생산량/2013_2020_주요지역_재배면적_생산량.csv"<br/>

 	5_도매가_데이터_종합.ipynb<br/>
	  - 각 연도별, 배추품종별 도매가격 데이터를 하나의 데이터셋으로 종합합니다.<br/>
	  - inputs : "./data/도매가/원본/"<br/>
	  - output : "./data/도매가/종합/도매_가격_완성본_13_21년도.csv"<br/>

 	6_도매가_보간_전처리.ipynb<br/>
	  - '5_도매가_데이터_종합.ipynb'에서 종합된 데이터 중 결측지를 탐색후 보간처리하여 데이터셋화합니다.<br/>
	  - inputs : "./data/도매가/종합/", "./data/거래량/13_21년도_5대시장_거래량_종합.csv"<br/>
	  - output : "./data/재배면적_생산량/종합/도매_가격_완성본_13_21년도.csv"<br/>

 	7_최종_학습_데이터셋_종합.ipynb<br/>
	  - 위 과정들을 통해 전처리된 각 데이터들을 모델 학습을 위한 형태로 종합하여 각 지역별 데이터셋화합니다.<br/>
	  - inputs : "./data/result/입력/"<br/>
	  - output : "./data/result/입력/학습데이터1차_{지역명}.csv"<br/>

 	8_최종_학습_데이터셋_지역별_shift_merge.ipynb<br/>
	  - 1차로 종합된 학습 데이터에서 모델 학습 최적화를 위한 shift를 적용하고 재조합합니다.<br/>
	  - 지역별 최종 학습 데이터셋을 작성하는 코드로 지역별로 총 5개의 코드가 있습니다.<br/>
	  - 가격 예측을 위한 학습 데이터 작성을 원하는 지역을 선정하여 실행하면 해당 지역에 대한 최종 학습 데이터를 얻을 수 있습니다.<br/>
	  - inputs : "./data/result/입력/학습데이터1차_{지역명}.csv"<br/>
	  - output : "./data/result/출력/최종학습데이터_{지역명}.csv"<br/>

### 2. 모델 코드 실행
- 모델 코드 디렉토리("./모델코드/") 내에 배추 가격 예측을 위한 모델 코드가 모델별, 지역별로 구분되어 있습니다.
- LSTM, GRU 두 개의 모델에 대해 각각 서울, 부산, 대구, 광주, 대전 총 5개의 도시별로 모델코드(.ipynb)가 구현되어 있습니다.
- 프로젝트 개발환경과 환경을 일치 시킨 후, 전처리 코드 실행을 통해 데이터셋을 작성과정을 마쳤으면 예측을 원하는 모델 및 지역별로 코드를 실행하여 결과를 얻을 수 있습니다.

### 3. 검정 코드 실행
- 검정 코드 디렉토리("./모델코드/") 내에 학습 데이터를 구성하는 원본 시계열 데이터의 정상성을 검증하기 위한 통계 검증 코드가 존재합니다.
- 각 지역별 최종학습데이터의 정상성을 검증하기 위한 코드로 서울, 부산, 대구, 광주, 대전 총 5개의 도시별로 검증코드(.ipynb)가 구현되어 있습니다.
- 프로젝트 개발환경과 환경을 일치 시킨 후, 전처리 코드 실행을 통해 데이터셋을 작성과정을 마쳤으면 검증을 원하는 모델 및 지역별로 코드를 실행하여 결과를 얻을 수 있습니다.



*감사합니다.*
